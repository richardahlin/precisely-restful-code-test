# Precisely RESTful Code Test
This is an application written in `Go` (and my first `Go` application) implementing a REST API for management of contract documents. It uses the Gin Web Framework and MongoDB, the latter of which is running in MongoDB's cloud environment. 

Using this REST API you're able to read, write, update and delete documents adhering to the standardized contract document presented below. 

EXPLAIN HOW TO RUN
## JSON structures
This application utilizes the JSON format, which is the style data will be in.
### Contract Document
```
{
  "title" : "A first contract",
  "content" : {
      "header": "A contract header",
      "data" : "Formal specifications here...."
  },
  "signee": "Mr. Burns"
}
```
This is the structure of a contract document stored in the database.
### Error Message
```
{ "error": "detail of error" }
```
This is the structure of an error message in a HTTP response body.
## REST API

The API supports reading, writing, updating and deleting documents, using the following endpoints.
```
GET     /documents/:id      get a particular document from an ID
GET     /documents          get all documents
POST    /documents          create a new document
PATCH   /documents/:id      update a particular document
DELETE  /documents/:id      delete a particular document
```
### Creating Documents
In order to manage documents, they first need to be created in order to obtain an ID. 

This ID is generated by the server and is included in the response from a POST request. For instance, this POST request response:
```
{
  "id": 3,
  "title" : "A first contract",
  "content" : {
      "header": "A contract header",
      "data" : "Formal specifications here...."
  },
  "signee": "Mr. Burns"
}
```
This ID is later used in other requests as a reference. 

Also, when creating a document, all fields of the document structure need values in the request.

### Making Requests
How to make requests:

- `GET`     These requests are straight forward. Simply issue the request without a request body (one needs an ID though)
- `POST`    Include a JSON object in the request body. A validator is run on the document and will reject it if not all values are filled.
- `PATCH`   Issue a request with a JSON object of the same document structure as above, but only fill the values you wish to change. A validator is run to make sure there exists at least one value.
- `DELETE`  Issue a request with an ID. No request body needed.

#### Example Request
A `PATCH` request on document with ID 7 using `curl` might look like the following.
```
curl http://localhost:8080/document/7    --include     --header "Content-Type: application/json"     --request "PATCH"     --data '{"signee":"Mr. Smith"}'
```


### Response Codes
These are the possible response codes for each endpoint.

```
GET     /documents/:id      200 OK,         502 Bad Gateway,  500 Internal Server Error,  400 Bad Request,  404 Not Found
GET     /documents          200 OK,         502 Bad Gateway,  500 Internal Server Error
POST    /documents          201 Created,    502 Bad Gateway,  500 Internal Server Error,  400 Bad Request
PATCH   /documents/:id      200 OK,         502 Bad Gateway,  500 Internal Server Error,  400 Bad Request,  404 Not Found
DELETE  /documents/:id      204 No Content, 502 Bad Gateway,  500 Internal Server Error,  400 Bad Request,  404 Not Found
```

The response body of an error (i.e. non-2xx code) will also contain a detailed error message, as mentioned.

#### 2xx OK, Created, No Content
If all goes well, a 2xx response code will be returned. For both instances of `GET`, the requested object is included in the response body. For `POST`, the newly created object is returned. For `PATCH`, the newly updated complete document is returned. For `DELETE` nothing is returned in the response body.

#### 400 Bad Request
Bad formatting in the request, for instance an ID not being a number, illegal structure of `JSON` request body, not all values are filled when doing a `POST`, no value is declared in a `PATCH`, etc.

#### 404 Not Found
Requested ID not found in database.

#### 500 Internal Server Error
A server state is reached which should not be possible. Error in implementation.

#### 502 Bad Gateway
Error in MongoDB cloud servers.



